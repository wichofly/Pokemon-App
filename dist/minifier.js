let pokemonRepository = function () { console.log("Init pokemonRepo..."); let g = []; function a(a) { "object" == typeof a && "name" in a ? g.push(a) : console.log("Pokemon is not valid!") } function b() { return g } $("input").on("input", function () { let a = $("input").val(); $("li").each(function () { let b = $(this); b.text().toLowerCase().startsWith(a.toLowerCase()) || b.hasClass("nav-item") ? b.show() : b.hide() }) }); let c = document.querySelector(".container"), d = document.createElement("div"); function h() { d.innerText = "A couple of seconds please..", console.log("A couple of seconds pelase....") } function i() { d.remove(), console.log("All good, thanks for waiting!") } function e(a) { return console.log("loading details..."), h(!1), fetch(a.detailsUrl).then(function (a) { return a.json() }).then(function (b) { console.log("details:", b), i(!0), a.pokemonImg = b.sprites.other.dream_world.front_default, a.height = b.height; let c = []; b.types.forEach(b => { let a = b.type.name; a = a[0].toUpperCase() + a.substring(1), c.push(a) }), a.types = c, a.weight = b.weight; let d = []; b.abilities.forEach(b => { let a = b.ability.name; a = a[0].toUpperCase() + a.substring(1), d.push(a) }), a.abilities = d }).catch(function (a) { i(!0), console.error(a) }) } function f(a) { e(a).then(function () { j(a) }) } function j(a) { let b = $(".modal-body"), c = $(".modal-title"); c.empty(), b.empty(); let d = $(`<h1 class="ml-4 mt-3 mb-0">${a.name}</h1>`), e = $(`<img class="modal-img mx-auto d-block w-50" src="${a.pokemonImg}">`), f = $(`<p class="ml-4 mt-3 mb-0">Height: ${a.height}</p>`), g = $(`<p class="ml-4 mb-0">Weight: ${a.weight}</p>`), h = $(`<div class="ml-4 mb-0">Types: ${a.types.join(", ")}</div>`), i = $(`<p class="ml-4">Abilities: ${a.abilities.join(", ")}</p>`); c.append(d), b.append(e), b.append(f), b.append(g), b.append(h), b.append(i), $("#exampleModal").modal() } return c.append(d), { add: a, getAll: b, addListItem: function (c) { let e = document.querySelector(".pokemon-list"), b = document.createElement("li"); b.classList.add("col-sm-6", "col-md-4", "col-lg-3"); let d = document.createElement("div"), a = document.createElement("button"); a.innerText = c.name, a.classList.add("bg-light", "w-100", "border-warning", "rounded"), a.style.padding = "15px", a.style.margin = "5px", d.appendChild(a), b.appendChild(d), e.appendChild(b), function (a, b) { a.addEventListener("click", function () { f(b) }) }(a, c) }, showDetails: f, loadList: function () { return h(!1), fetch("https://pokeapi.co/api/v2/pokemon/?limit=151").then(function (a) { return a.json() }).then(function (b) { i(!0), b.results.forEach(function (b) { a({ name: b.name.toUpperCase(), detailsUrl: b.url }) }) }).catch(function (a) { i(!0), console.error(a) }) }, loadDetails: e } }(), pokemonList = pokemonRepository.getAll(); pokemonRepository.loadList().then(function () { pokemonList.forEach(function (a) { pokemonRepository.addListItem(a) }) })